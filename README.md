# ‚ú® SparkAI Live-api Server‚ú® - –°–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω–æ–≥–æ –ò–ò –≤ –º–æ–µ–π –ø–æ–ø—ã—Ç–∫–µ –Ω–∞ –ò–ò-–≠–∫–æ—Å–∏—Å—Ç–µ–º—É

–ü—Ä–∏–≤–µ—Ç! üëã –Ø —Ä–µ—à–∏–ª –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º **SparkAI** —Å –º–∏—Ä–æ–º. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —è –¥–µ–ª–∞–ª –µ–≥–æ –¥–ª—è —Å–µ–±—è, –¥–ª—è —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏—è –∏ –∫–∞–∫ —É–º–Ω–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞ –¥–ª—è —Å–µ–º—å–∏ –∏ –¥—Ä—É–∑–µ–π. 

–ü–æ—Å–∫–æ–ª—å–∫—É —è –∏—Å–ø–æ–ª—å–∑—É—é –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –ø–æ–¥—É–º–∞–ª, –ø–æ—á–µ–º—É –±—ã –Ω–µ –≤—ã–ª–æ–∂–∏—Ç—å –≤—Å—ë –≤ open-source?

**–í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ:** –Ø –Ω–µ –ø–ª–∞–Ω–∏—Ä—É—é –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∫–æ–¥ –ø–æ–¥ –æ–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–ª–∏ –¥–µ–ª–∞—Ç—å –∏–∑ –Ω–µ–≥–æ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –ø—Ä–æ–¥—É–∫—Ç. –≠—Ç–æ —Å–∫–æ—Ä–µ–µ –º–æ–π –ª–∏—á–Ω—ã–π playground, –∫–æ—Ç–æ—Ä—ã–º —è –¥–µ–ª—é—Å—å "–∫–∞–∫ –µ—Å—Ç—å". –ï—Å–ª–∏ –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, —á—Ç–æ —è —Ç—É—Ç –Ω–∞–≤–∞—è–ª, –∏ –≤—ã –±–æ–ª–µ–µ-–º–µ–Ω–µ–µ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç–µ—Å—å –≤ Python, Web-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞—Ö –∏ –ò–ò ‚Äì –¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ú–æ–∂–µ—Ç–µ —Ñ–æ—Ä–∫–∞—Ç—å, –∫–æ–≤—ã—Ä—è—Ç—å—Å—è, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–≤–æ–∏—Ö –Ω—É–∂–¥.

## üåü –ß—Ç–æ —Ç–∞–∫–æ–µ SparkAI?

**SparkAI** ‚Äì —ç—Ç–æ –º–æ—è –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å —Ü–µ–ª—É—é –ò–ò-—ç–∫–æ—Å–∏—Å—Ç–µ–º—É. –ì–ª–∞–≤–Ω—ã–π –≥–µ—Ä–æ–π —Ç—É—Ç ‚Äì **–°–ø–∞—Ä–∫**, –º–æ–π –æ—Å–Ω–æ–≤–Ω–æ–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –û–Ω:

* üó£Ô∏è **–ì–æ–ª–æ—Å–æ–≤–æ–π:** –û–±—â–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –≥–æ–ª–æ—Å–æ–º.
* ü§ñ **–ê–≥–µ–Ω—Ç–Ω—ã–π:** –£–º–µ–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∏ –∑–∞–¥–∞—á–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∞–≥–µ–Ω—Ç–æ–≤.
* ‚ö° **–ë—ã—Å—Ç—Ä—ã–π –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π:** –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ **Google Gemini Live API**, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏ –æ—Ç–∑—ã–≤—á–∏–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ.
* üß† **–£–º–Ω—ã–π:** –ü–æ–º–æ–≥–∞–µ—Ç –º–Ω–µ –≤ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö, –æ–±—É—á–µ–Ω–∏–∏ –∏ –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑–≤–ª–µ–∫–∞–µ—Ç.

–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ FastAPI, —Å–ø–æ—Å–æ–±–Ω–æ–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å real-time –∑–∞–ø—Ä–æ—Å—ã –æ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å –ø–æ–∫–∞ –Ω–µ –≤ —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (–µ—â—ë –¥–æ–ø–∏–ª–∏–≤–∞—é MVP), –Ω–æ –≤ –ø–ª–∞–Ω–∞—Ö –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–¥ Android, Windows, Android TV –∏ –¥–∞–∂–µ watchOS!

## –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≥–µ–Ω—Ç–Ω–æ—Å—Ç–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≥–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—á–µ–Ω—å –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ "—É–º–µ–Ω–∏—è" –¥–ª—è –°–ø–∞—Ä–∫–∞.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

1.  **–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏:** –í—ã –æ–ø–∏—Å—ã–≤–∞–µ—Ç–µ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é (–¥–µ–π—Å—Ç–≤–∏–µ) –≤ —Å–ø–∏—Å–∫–µ `FUNCTION_DECLARATIONS` –≤ —Ñ–∞–π–ª–µ `server.py`. –≠—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã Gemini –∑–Ω–∞–ª, –∫–æ–≥–¥–∞ –∏ –∫–∞–∫ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –≤–∞—à–µ –¥–µ–π—Å—Ç–≤–∏–µ.
2.  **–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Ñ—É–Ω–∫—Ü–∏–∏:** –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `functions/` –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ Python-—Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä, `my_cool_action.py`.
3.  **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏:** –í–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å —Ç–∞–∫–∏–º –∂–µ –∏–º–µ–Ω–µ–º, –∫–∞–∫ –∏ —Ñ–∞–π–ª (–∏ –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –≤ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏), –Ω–∞–ø—Ä–∏–º–µ—Ä:
    ```python
    # functions/my_cool_action.py
    async def my_cool_action(args):
        # args - —ç—Ç–æ —Å–ª–æ–≤–∞—Ä—å —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–¥–∞–ª Gemini
        session_id = args.get("session_id") # ID —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ –¥–ª—è —Å–≤—è–∑–∏ —Å –∫–ª–∏–µ–Ω—Ç–æ–º
        # ... –≤–∞—à–∞ –ª–æ–≥–∏–∫–∞ ...
        # –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —á—Ç–æ-—Ç–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å HTML):
        # await manager.send_instruction(session_id, "SET", "my_cool_action_ui", {"html_content": "<h1>–ü—Ä–∏–≤–µ—Ç!</h1>"})
        return "–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è Gemini"
    ```
4.  **–í—Å—ë!** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∏ –≤—ã–∑–æ–≤–µ—Ç –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ–≥–¥–∞ Gemini —Ä–µ—à–∏—Ç –µ—ë –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

–í –±—É–¥—É—â–µ–º —è –¥–∞–∂–µ –ø–ª–∞–Ω–∏—Ä—É—é —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –°–ø–∞—Ä–∫ —Å–∞–º –º–æ–≥ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è)

–î–ª—è **–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–ª–∏ —Å–ª–æ–∂–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π**, –≥–¥–µ –Ω—É–∂–Ω–æ –∞–∫—Ç–∏–≤–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∫–ª–∏–µ–Ω—Ç–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ HTML, –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ UI), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `connection_manager.py`. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–µ—Ä–≤–µ—Ä—É –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç—É, –∞ –∫–ª–∏–µ–Ω—Ç—É ‚Äì –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –æ—Ç–≤–µ—Ç—ã –∏–ª–∏ —Å–æ–±—ã—Ç–∏—è. –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –¥–ª—è —ç—Ç–æ–≥–æ —Ç–æ–∂–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ —É–¥–æ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–ø–æ–∫–∞ –Ω–∞ HTML).

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

* **–°–µ—Ä–≤–µ—Ä:** Python, FastAPI
* **–ò–ò-–º–æ–¥–µ–ª—å:** Google Gemini Live API (`gemini-2.0-flash-live-001`)
* **Real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è:** WebSockets

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞:**

* `server.py`:
    * –ì–ª–∞–≤–Ω–æ–µ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
    * –û–±—Ä–∞–±–æ—Ç–∫–∞ WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (`/ws`).
    * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏ —Å Gemini (–≤–∫–ª—é—á–∞—è —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≥–æ–ª–æ—Å–∞).
    * –ü—Ä–∏–µ–º –∞—É–¥–∏–æ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Gemini.
    * –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—É–¥–∏–æ-–æ—Ç–≤–µ—Ç–æ–≤ –∏ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π (tool calls) –æ—Ç Gemini.
    * –ú–µ—Å—Ç–æ –¥–ª—è `FUNCTION_DECLARATIONS` ‚Äì –∑–¥–µ—Å—å –≤—ã –æ–ø–∏—Å—ã–≤–∞–µ—Ç–µ —Å–≤–æ–∏ –∞–≥–µ–Ω—Ç—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏.
* `dynamic_function_caller.py`:
    * –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –∞–≥–µ–Ω—Ç–æ–≤ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `functions/`.
    * `handle_function_call` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç Gemini.
    * `load_and_execute_function` –Ω–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω—ã–π `.py` —Ñ–∞–π–ª –≤ `functions/`, –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –µ–≥–æ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é.
* `connection_manager.py`:
    * –£–ø—Ä–∞–≤–ª—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–º–∏ WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏.
    * –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (JSON) –Ω–∞ –∫–ª–∏–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç —Ñ—É–Ω–∫—Ü–∏–∏).
    * –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è, –ø—Ä–∏—Ö–æ–¥—è—â–∏–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `function_response`).
* `functions/` (–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è):
    * –ó–¥–µ—Å—å –∂–∏–≤—É—Ç –º–æ–¥—É–ª–∏ —Å –≤–∞—à–∏–º–∏ –∞–≥–µ–Ω—Ç—Å–∫–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `text_display.py`, `wolfram.py`, `web_search.py`).
    * –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –æ–±—ã—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.

## üöÄ –ö–∞–∫ –Ω–∞—á–∞—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ—ë?

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.**
2.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** `pip install -r requirements.txt` (–í–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞—Ç—å `requirements.txt` –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ –∫–æ–¥–µ: `fastapi`, `uvicorn`, `google-generativeai`, `pydantic`, `requests`, `aiohttp`, `beautifulsoup4`, `readability-lxml` –∏ —Ç.–¥.).
3.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å API –∫–ª—é—á –¥–ª—è Google Gemini –∏ –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `GENAI_API_KEY`. –î–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ `wolfram.py` —Ç–∞–∫–∂–µ –Ω—É–∂–µ–Ω `APP_ID` –æ—Ç Wolfram|Alpha.
4.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:** `python server.py` (–∏–ª–∏ —á–µ—Ä–µ–∑ `uvicorn server:app --reload`).
5.  **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç** (–∫–æ–≥–¥–∞ –æ–Ω –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π WebSocket-–∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
    * –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å JSON —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —Å–µ—Å—Å–∏–∏:
        ```json
        {
            "system_prompt": "–¢—ã –°–ø–∞—Ä–∫, –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –∏ –ø–æ–ª–µ–∑–Ω—ã–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.",
            "voice_name": "Orus" // –ü—Ä–∏–º–µ—Ä –≥–æ–ª–æ—Å–∞
        }
        ```
6.  **–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≥–µ–Ω—Ç–∞:**
    * –û–ø–∏—à–∏—Ç–µ –µ—ë –≤ `FUNCTION_DECLARATIONS` –≤ `server.py` (—Å–º. –ø—Ä–∏–º–µ—Ä—ã `text_display`, `wolfram`, `web_search`).
    * –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `functions/your_function_name.py`.
    * –í —ç—Ç–æ–º —Ñ–∞–π–ª–µ –Ω–∞–ø–∏—à–∏—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `async def your_function_name(args):`.
        * `args` ‚Äì —ç—Ç–æ —Å–ª–æ–≤–∞—Ä—å, –∫–æ—Ç–æ—Ä—ã–π Gemini –ø–µ—Ä–µ–¥–∞—Å—Ç –≤–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏. –û–Ω –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤ `FUNCTION_DECLARATIONS`, –∞ —Ç–∞–∫–∂–µ `session_id`, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å `connection_manager.manager` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–ª–∏–µ–Ω—Ç.
        * –§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –æ–±—Ä–∞—Ç–Ω–æ –≤ Gemini.
        * –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `connection_manager` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–ª–∏–µ–Ω—Ç –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏:
            ```python
            from connection_manager import manager # –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ manager –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

            async def my_interactive_function(args):
                session_id = args.get("session_id")
                # ... –∫–∞–∫–∞—è-—Ç–æ –ª–æ–≥–∏–∫–∞ ...
                data_for_client = {"message": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–¥–µ–ª–∞–π—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ!"}
                await manager.send_instruction(
                    session_id=session_id,
                    instruction_type="SET", # –¢–∏–ø –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º, –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –µ–≥–æ –ø–æ–Ω–∏–º–∞—Ç—å)
                    function_name="my_interactive_function_ui", # –ò–º—è –¥–ª—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
                    args=data_for_client # –î–∞–Ω–Ω—ã–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
                )
                # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ,
                # –∏—Å–ø–æ–ª—å–∑—É—è —Å–∏—Å—Ç–µ–º—É –ø–æ–¥–ø–∏—Å–æ–∫ –≤ connection_manager.
                return "–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–æ."
            ```

## –ë—É–¥—É—â–∏–µ –ø–ª–∞–Ω—ã

* –í—ã–ø—É—Å—Ç–∏—Ç—å MVP –∫–ª–∏–µ–Ω—Ç–∞ –∏ –∑–∞—Ç–µ–º —Ä–∞–∑–≤–∏–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º.
* –î–∞—Ç—å –°–ø–∞—Ä–∫—É –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∞–º–æ–º—É –ø–∏—Å–∞—Ç—å –∫–æ–¥ –¥–ª—è –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π.
* –°–æ–∑–¥–∞—Ç—å –±–µ—Å—à–æ–≤–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏, –∫–∞–∫ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ.
* –ü–æ–∑–≤–æ–ª–∏—Ç—å –°–ø–∞—Ä–∫—É —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ 24/7, –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–≤–æ–¥—è –≥–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫, –Ω–∞–ø–∏—Å–∞–Ω–∏ —Ä–∞–±–æ—Ç –∏–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º –ø–æ –µ–≥–æ –∂–µ–ª–∞–Ω–∏—é –∏ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É, –ø–æ–∫–∞ –≤—ã –æ—Ç–¥—ã—Ö–∞–µ—Ç–µ.
* –í—ã–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∞–≥–µ–Ω—Ç–Ω–æ—Å—Ç–∏, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—â—É—é –∫–æ–º–ø—å—é—Ç–µ—Ä —Ç–æ—á–Ω–æ –∫–∞–∫ —á–µ–ª–æ–≤–µ–∫, –¥–≤–∏–≥–∞—è –º—ã—à–∫–æ–π, –Ω–∞–∂–∏–º–∞—è –Ω–∞ –∫–Ω–æ–ø–∫–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –°–ø–∞—Ä–∫—É –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –±–µ–∑ api –∏–ª–∏ –æ–±—É—á–µ–Ω–∏—è –≤–æ–æ–±—â–µ. (–†–∞–±–æ—á–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø —É–∂–µ –µ—Å—Ç—å)
* –ú–Ω–æ–≥–æ –¥—Ä—É–≥–∏—Ö –∏–¥–µ–π

## ü§ù –í–∫–ª–∞–¥ –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

–≠—Ç–æ –ª–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç, –Ω–æ —è –≤—Å–µ–≥–¥–∞ —Ä–∞–¥ –Ω–æ–≤—ã–º –∏–¥–µ—è–º –∏ –ª—é–±–æ–π –ø–æ–º–æ—â–∏! –ï—Å–ª–∏ –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ç–æ, —á—Ç–æ —è –¥–µ–ª–∞—é, –≤—ã –Ω–∞—à–ª–∏ –æ—à–∏–±–∫—É, –∏–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é ‚Äì —Å–º–µ–ª–æ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issue. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —á—Ç–æ-—Ç–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –∏–ª–∏ –ø–æ—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –∫–æ–¥–æ–º ‚Äì —Ñ–æ—Ä–∫–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –±—É–¥—É —Ç–æ–ª—å–∫–æ —Ä–∞–¥! –í–º–µ—Å—Ç–µ –º—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å SparkAI –µ—â–µ –ª—É—á—à–µ

–ì–ª–∞–≤–Ω–æ–µ ‚Äì –ø–æ–ª—É—á–∞–π—Ç–µ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –æ—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞)


